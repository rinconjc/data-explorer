<div class="panel panel-default">
  <alert ng-if="result.$error" type="danger">{{result.$error}}</alert>
  <div class="table-responsive">
    <div class="panel-heading" style="padding:2px;">
      <div class="btn-toolbar" role="toolbar" aria-label="...">
        <div class="btn-group" role="group" aria-label="...">
          <button type="button" class="btn btn-default" ng-click="execute()">Execute <span class="glyphicon glyphicon-play"></span> </button>
          <button type="button" class="btn btn-default" ng-click="saveSql()">Save <span class="glyphicon glyphicon-save"></span></button>
          <button type="button" class="btn btn-default" ng-click="clear()">Clear <span class="glyphicon glyphicon-erase"></span></button>
        </div>
        <div class="btn-group" role="group" aria-label="...">
          <input type="text" class="form-control" placeholder="Search existing queries..." size="40"  typeahead="q.name for q in queries | filter:$viewValue" ng-model="query.name" typeahead-editable="false" typeahead-on-select="loadQuery($item, $model, $label)" focus-on="searchQuery"/>
        </div>
        <div class="btn-group" role="group" aria-label="...">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Copy To <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li ng-repeat="ds in datasources"><a ng-click="">{{ds.name}}</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="panel-body" style="padding:0px;">
      <textarea ui-codemirror="{mode:'text/x-sql', readOnly:false, autofocus:true, indentWithTabs:true, smartIndent:true, matchBrackets:true, extraKeys:{'Ctrl+Space':'autocomplete'}, hintOptions:{tables:tablesInfo}, onLoad:editorLoaded}" ng-model="query.sql" focus-on="enterSql"></textarea>
    </div>
    <div class="panel-footer">
      <div ng-show="result.rowsAffected" class="text-left">{{result.rowsAffected}}</div>
    </div>
  </div>
  <spinner hide-when="result.$resolved || !result" />
  <alert ng-if="result.$error" type="danger">{{result.$error}}</alert>
  <tabset>
    <tab ng-repeat="r in results">
      <tab-heading>Result #{{$index}} <close-button close="closeResult($index)"/></tab-heading>
      <div class="table-responsive">
        <ng-table class="table-bordered summary" columns="r.data.columns" data="r.data.rows" has-more="true" show-more-fn="fetchNext($index)" />
      </div>
    </tab>
  </tabset>
